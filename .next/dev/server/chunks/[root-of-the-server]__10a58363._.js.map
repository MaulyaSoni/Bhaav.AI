{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Emotion-Detection/lib/config.ts"],"sourcesContent":["// Configuration for the ML backend\n// The Python FastAPI server should be running on this URL\n\nexport const ML_CONFIG = {\n  // The URL where your Python ML backend is running\n  // For development, this is typically localhost:8001\n  // For production, replace with your actual backend URL\n  BACKEND_URL: process.env.NEXT_PUBLIC_ML_BACKEND_URL || \"http://localhost:8001\",\n\n  // API endpoints\n  ENDPOINTS: {\n    ANALYZE_TEXT: \"/api/analyze/text\",\n    ANALYZE_IMAGE: \"/api/analyze/image\",\n    ANALYZE_FRAME: \"/api/analyze/frame\",\n    HEALTH: \"/api/health\",\n  },\n\n  // Emotion labels matching the model output order\n  EMOTION_LABELS: [\"Angry\", \"Disgust\", \"Fear\", \"Happy\", \"Sad\", \"Surprise\", \"Neutral\"] as const,\n\n  // Confidence threshold (same as Python model)\n  CONFIDENCE_THRESHOLD: 0.25,\n\n  // Frame analysis interval for webcam (ms)\n  FRAME_INTERVAL: 500,\n}\n"],"names":[],"mappings":"AAAA,mCAAmC;AACnC,0DAA0D;;;;;AAEnD,MAAM,YAAY;IACvB,kDAAkD;IAClD,oDAAoD;IACpD,uDAAuD;IACvD,aAAa,QAAQ,GAAG,CAAC,0BAA0B,IAAI;IAEvD,gBAAgB;IAChB,WAAW;QACT,cAAc;QACd,eAAe;QACf,eAAe;QACf,QAAQ;IACV;IAEA,iDAAiD;IACjD,gBAAgB;QAAC;QAAS;QAAW;QAAQ;QAAS;QAAO;QAAY;KAAU;IAEnF,8CAA8C;IAC9C,sBAAsB;IAEtB,0CAA0C;IAC1C,gBAAgB;AAClB"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///D:/Emotion-Detection/lib/emotion-api.ts"],"sourcesContent":["import type { EmotionResult, EmotionType, EmotionDistribution } from \"./emotion-types\"\nimport { ML_CONFIG } from \"./config\"\n\nconst EMOTION_LABELS = ML_CONFIG.EMOTION_LABELS\nconst EMPTY_DISTRIBUTION: EmotionDistribution = {\n  Angry: 0,\n  Disgust: 0,\n  Fear: 0,\n  Happy: 0,\n  Sad: 0,\n  Surprise: 0,\n  Neutral: 0,\n}\n\n// Convert ML backend predictions array to EmotionDistribution\nfunction predictionsToDistribution(predictions: number[]): EmotionDistribution {\n  const total = predictions.reduce((a, b) => a + b, 0)\n  return {\n    Angry: Math.round((predictions[0] / total) * 100),\n    Disgust: Math.round((predictions[1] / total) * 100),\n    Fear: Math.round((predictions[2] / total) * 100),\n    Happy: Math.round((predictions[3] / total) * 100),\n    Sad: Math.round((predictions[4] / total) * 100),\n    Surprise: Math.round((predictions[5] / total) * 100),\n    Neutral: Math.round((predictions[6] / total) * 100),\n  }\n}\n\n// Check if ML backend is available\nexport async function checkBackendHealth(): Promise<boolean> {\n  try {\n    const response = await fetch(`${ML_CONFIG.BACKEND_URL}${ML_CONFIG.ENDPOINTS.HEALTH}`, {\n      method: \"GET\",\n      signal: AbortSignal.timeout(3000),\n    })\n    return response.ok\n  } catch {\n    return false\n  }\n}\n\n// Analyze text emotion via API\nexport async function analyzeText(text: string): Promise<EmotionResult> {\n  const response = await fetch(\"/api/analyze/text\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ text }),\n  })\n\n  if (!response.ok) {\n    throw new Error(\"Text analysis failed\")\n  }\n\n  return response.json()\n}\n\n// Analyze image emotion via API\nexport async function analyzeImage(imageData: string): Promise<EmotionResult> {\n  const response = await fetch(\"/api/analyze/image\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ image: imageData }),\n  })\n\n  if (!response.ok) {\n    throw new Error(\"Image analysis failed\")\n  }\n\n  return response.json()\n}\n\n// Analyze webcam frame via API (optimized for real-time)\nexport async function analyzeFrame(frameData: string): Promise<EmotionResult> {\n  const response = await fetch(\"/api/analyze/frame\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ frame: frameData }),\n  })\n\n  if (!response.ok) {\n    throw new Error(\"Frame analysis failed\")\n  }\n\n  return response.json()\n}\n\n// Fallback: Local text analysis when backend is unavailable\nexport function analyzeTextLocally(text: string): EmotionResult {\n  const lowerText = text.toLowerCase()\n\n  const emotionKeywords: Record<EmotionType, string[]> = {\n    Happy: [\n      \"happy\",\n      \"joy\",\n      \"love\",\n      \"excited\",\n      \"great\",\n      \"wonderful\",\n      \"amazing\",\n      \"awesome\",\n      \"fantastic\",\n      \"delighted\",\n      \"pleased\",\n      \"glad\",\n      \"cheerful\",\n      \"thrilled\",\n      \"elated\",\n      \"good\",\n      \"best\",\n      \"beautiful\",\n    ],\n    Sad: [\n      \"sad\",\n      \"unhappy\",\n      \"depressed\",\n      \"cry\",\n      \"tears\",\n      \"miserable\",\n      \"heartbroken\",\n      \"grief\",\n      \"sorrow\",\n      \"disappointed\",\n      \"lonely\",\n      \"hopeless\",\n      \"gloomy\",\n      \"melancholy\",\n      \"hurt\",\n      \"pain\",\n    ],\n    Angry: [\n      \"angry\",\n      \"mad\",\n      \"furious\",\n      \"hate\",\n      \"annoyed\",\n      \"frustrated\",\n      \"irritated\",\n      \"outraged\",\n      \"enraged\",\n      \"livid\",\n      \"bitter\",\n      \"resentful\",\n      \"hostile\",\n      \"rage\",\n    ],\n    Fear: [\n      \"afraid\",\n      \"scared\",\n      \"fear\",\n      \"terrified\",\n      \"anxious\",\n      \"worried\",\n      \"nervous\",\n      \"panic\",\n      \"dread\",\n      \"frightened\",\n      \"alarmed\",\n      \"horrified\",\n      \"petrified\",\n      \"terror\",\n    ],\n    Surprise: [\n      \"surprised\",\n      \"shocked\",\n      \"amazed\",\n      \"astonished\",\n      \"unexpected\",\n      \"wow\",\n      \"unbelievable\",\n      \"startled\",\n      \"stunned\",\n      \"bewildered\",\n      \"astounded\",\n      \"whoa\",\n    ],\n    Disgust: [\n      \"disgusted\",\n      \"gross\",\n      \"nasty\",\n      \"revolting\",\n      \"sick\",\n      \"yuck\",\n      \"ew\",\n      \"horrible\",\n      \"awful\",\n      \"repulsed\",\n      \"vile\",\n      \"distaste\",\n    ],\n    Neutral: [\"okay\", \"fine\", \"normal\", \"alright\", \"so-so\", \"whatever\", \"meh\", \"indifferent\", \"average\", \"ordinary\"],\n  }\n\n  const scores: EmotionDistribution = {\n    Happy: 0,\n    Sad: 0,\n    Angry: 0,\n    Fear: 0,\n    Surprise: 0,\n    Disgust: 0,\n    Neutral: 10,\n  }\n\n  Object.entries(emotionKeywords).forEach(([emotion, keywords]) => {\n    keywords.forEach((keyword) => {\n      if (lowerText.includes(keyword)) {\n        scores[emotion as EmotionType] += 15\n      }\n    })\n  })\n\n  // Punctuation analysis\n  const exclamationCount = (text.match(/!/g) || []).length\n  if (exclamationCount > 2) {\n    scores.Happy += 5\n    scores.Surprise += 5\n    scores.Angry += 3\n  }\n\n  // Caps analysis (shouting)\n  const capsRatio = (text.match(/[A-Z]/g) || []).length / text.length\n  if (capsRatio > 0.5 && text.length > 10) {\n    scores.Angry += 10\n    scores.Surprise += 5\n  }\n\n  // Normalize\n  const total = Object.values(scores).reduce((a, b) => a + b, 0)\n  const distribution: EmotionDistribution = {\n    Angry: Math.round((scores.Angry / total) * 100),\n    Disgust: Math.round((scores.Disgust / total) * 100),\n    Fear: Math.round((scores.Fear / total) * 100),\n    Happy: Math.round((scores.Happy / total) * 100),\n    Sad: Math.round((scores.Sad / total) * 100),\n    Surprise: Math.round((scores.Surprise / total) * 100),\n    Neutral: Math.round((scores.Neutral / total) * 100),\n  }\n\n  const primaryEmotion = Object.entries(distribution).reduce((a, b) => (a[1] > b[1] ? a : b))[0] as EmotionType\n  const maxScore = Math.max(...Object.values(distribution))\n  const confidence = Math.min(95, maxScore + Math.random() * 15)\n\n  return {\n    primaryEmotion,\n    confidence,\n    distribution,\n    timestamp: Date.now(),\n    source: \"text\",\n  }\n}\n\n// Fallback: Generate random emotion for demo when backend unavailable\nexport function generateDemoEmotion(source: \"image\" | \"webcam\"): EmotionResult {\n  const rawScores = EMOTION_LABELS.map(() => Math.random() * 100)\n  const total = rawScores.reduce((a, b) => a + b, 0)\n\n  const distribution: EmotionDistribution = {\n    Angry: Math.round((rawScores[0] / total) * 100),\n    Disgust: Math.round((rawScores[1] / total) * 100),\n    Fear: Math.round((rawScores[2] / total) * 100),\n    Happy: Math.round((rawScores[3] / total) * 100),\n    Sad: Math.round((rawScores[4] / total) * 100),\n    Surprise: Math.round((rawScores[5] / total) * 100),\n    Neutral: Math.round((rawScores[6] / total) * 100),\n  }\n\n  const primaryEmotion = Object.entries(distribution).reduce((a, b) => (a[1] > b[1] ? a : b))[0] as EmotionType\n  const maxScore = Math.max(...Object.values(distribution))\n  const confidence = Math.min(98, maxScore + Math.random() * 20)\n\n  return {\n    primaryEmotion,\n    confidence,\n    distribution,\n    timestamp: Date.now(),\n    source,\n    faceData: source === \"webcam\" ? { x: 150, y: 80, width: 200, height: 250 } : undefined,\n  }\n}\n\nconst EMOTION_LABEL_SET = new Set<EmotionType>(EMOTION_LABELS as readonly EmotionType[])\n\nexport function transformBackendEmotionResult(\n  data: {\n    emotion?: EmotionType | string\n    confidence?: number\n    predictions?: number[]\n    face_bbox?: [number, number, number, number]\n  },\n  source: \"image\" | \"webcam\",\n): EmotionResult {\n  const predictions = Array.isArray(data.predictions)\n    ? data.predictions.map((value) => (typeof value === \"number\" ? value : Number(value) || 0))\n    : []\n\n  const hasValidPredictions = predictions.length === EMOTION_LABELS.length\n  let distribution: EmotionDistribution = { ...EMPTY_DISTRIBUTION }\n  let confidence = Math.min(100, Math.max(0, (data.confidence ?? 0) * 100))\n\n  if (hasValidPredictions) {\n    distribution = predictionsToDistribution(predictions)\n    const maxValue = Math.max(...predictions)\n    const maxIndex = predictions.indexOf(maxValue)\n    confidence = Number(((maxValue / (predictions.reduce((sum, v) => sum + v, 0) || 1)) * 100).toFixed(1))\n    return {\n      primaryEmotion: EMOTION_LABELS[maxIndex],\n      confidence,\n      distribution,\n      timestamp: Date.now(),\n      source,\n      faceData: data.face_bbox\n        ? { x: data.face_bbox[0], y: data.face_bbox[1], width: data.face_bbox[2], height: data.face_bbox[3] }\n        : undefined,\n    }\n  }\n\n  const fallbackEmotion =\n    typeof data.emotion === \"string\" && EMOTION_LABEL_SET.has(data.emotion as EmotionType)\n      ? (data.emotion as EmotionType)\n      : \"Neutral\"\n\n  return {\n    primaryEmotion: fallbackEmotion,\n    confidence,\n    distribution,\n    timestamp: Date.now(),\n    source,\n    faceData: data.face_bbox\n      ? { x: data.face_bbox[0], y: data.face_bbox[1], width: data.face_bbox[2], height: data.face_bbox[3] }\n      : undefined,\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AACA;;AAEA,MAAM,iBAAiB,4HAAS,CAAC,cAAc;AAC/C,MAAM,qBAA0C;IAC9C,OAAO;IACP,SAAS;IACT,MAAM;IACN,OAAO;IACP,KAAK;IACL,UAAU;IACV,SAAS;AACX;AAEA,8DAA8D;AAC9D,SAAS,0BAA0B,WAAqB;IACtD,MAAM,QAAQ,YAAY,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,GAAG;IAClD,OAAO;QACL,OAAO,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;QAC7C,SAAS,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;QAC/C,MAAM,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;QAC5C,OAAO,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;QAC7C,KAAK,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;QAC3C,UAAU,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;QAChD,SAAS,KAAK,KAAK,CAAC,AAAC,WAAW,CAAC,EAAE,GAAG,QAAS;IACjD;AACF;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,4HAAS,CAAC,WAAW,GAAG,4HAAS,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE;YACpF,QAAQ;YACR,QAAQ,YAAY,OAAO,CAAC;QAC9B;QACA,OAAO,SAAS,EAAE;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAGO,eAAe,YAAY,IAAY;IAC5C,MAAM,WAAW,MAAM,MAAM,qBAAqB;QAChD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAK;IAC9B;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,eAAe,aAAa,SAAiB;IAClD,MAAM,WAAW,MAAM,MAAM,sBAAsB;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,OAAO;QAAU;IAC1C;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,eAAe,aAAa,SAAiB;IAClD,MAAM,WAAW,MAAM,MAAM,sBAAsB;QACjD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,OAAO;QAAU;IAC1C;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,SAAS,mBAAmB,IAAY;IAC7C,MAAM,YAAY,KAAK,WAAW;IAElC,MAAM,kBAAiD;QACrD,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,KAAK;YACH;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,SAAS;YACP;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,SAAS;YAAC;YAAQ;YAAQ;YAAU;YAAW;YAAS;YAAY;YAAO;YAAe;YAAW;SAAW;IAClH;IAEA,MAAM,SAA8B;QAClC,OAAO;QACP,KAAK;QACL,OAAO;QACP,MAAM;QACN,UAAU;QACV,SAAS;QACT,SAAS;IACX;IAEA,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,CAAC,CAAC,SAAS,SAAS;QAC1D,SAAS,OAAO,CAAC,CAAC;YAChB,IAAI,UAAU,QAAQ,CAAC,UAAU;gBAC/B,MAAM,C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"}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///D:/Emotion-Detection/app/api/analyze/image/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { ML_CONFIG } from \"@/lib/config\"\nimport { generateDemoEmotion, transformBackendEmotionResult } from \"@/lib/emotion-api\"\nimport type { EmotionResult } from \"@/lib/emotion-types\"\n\nexport async function POST(request: Request) {\n  try {\n    const { image } = await request.json()\n\n    if (!image || typeof image !== \"string\") {\n      return NextResponse.json({ error: \"Invalid image input\" }, { status: 400 })\n    }\n\n    // Try ML backend first\n    try {\n      const backendResponse = await fetch(`${ML_CONFIG.BACKEND_URL}${ML_CONFIG.ENDPOINTS.ANALYZE_IMAGE}`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ image }),\n        signal: AbortSignal.timeout(10000),\n      })\n\n      if (backendResponse.ok) {\n        const data = await backendResponse.json()\n        const result: EmotionResult = transformBackendEmotionResult(data, \"image\")\n        return NextResponse.json(result)\n      }\n    } catch {\n      console.log(\"[v0] ML backend unavailable, using demo mode for image\")\n    }\n\n    // Fallback to demo mode\n    const result: EmotionResult = generateDemoEmotion(\"image\")\n    return NextResponse.json(result)\n  } catch (error) {\n    console.error(\"Image analysis error:\", error)\n    return NextResponse.json({ error: \"Analysis failed\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpC,IAAI,CAAC,SAAS,OAAO,UAAU,UAAU;YACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,uBAAuB;QACvB,IAAI;YACF,MAAM,kBAAkB,MAAM,MAAM,GAAG,4HAAS,CAAC,WAAW,GAAG,4HAAS,CAAC,SAAS,CAAC,aAAa,EAAE,EAAE;gBAClG,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAM;gBAC7B,QAAQ,YAAY,OAAO,CAAC;YAC9B;YAEA,IAAI,gBAAgB,EAAE,EAAE;gBACtB,MAAM,OAAO,MAAM,gBAAgB,IAAI;gBACvC,MAAM,SAAwB,IAAA,wJAA6B,EAAC,MAAM;gBAClE,OAAO,gJAAY,CAAC,IAAI,CAAC;YAC3B;QACF,EAAE,OAAM;YACN,QAAQ,GAAG,CAAC;QACd;QAEA,wBAAwB;QACxB,MAAM,SAAwB,IAAA,8IAAmB,EAAC;QAClD,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;AACF"}}]
}